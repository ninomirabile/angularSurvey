import{a as m}from"./chunk-6SIT6EFP.js";import{Wb as a,Xb as d,ca as l,ua as s}from"./chunk-V5MVE5CM.js";var c=class n{THEME_STORAGE_KEY="theme_config";storage=new m;_themeMode=s("light");_primaryColor=s("#1976d2");_secondaryColor=s("#dc004e");_accentColor=s("#ff9800");_borderRadius=s(8);_fontFamily=s("Roboto, sans-serif");themeMode=this._themeMode.asReadonly();primaryColor=this._primaryColor.asReadonly();secondaryColor=this._secondaryColor.asReadonly();accentColor=this._accentColor.asReadonly();borderRadius=this._borderRadius.asReadonly();fontFamily=this._fontFamily.asReadonly();themeConfig=a(()=>({mode:this._themeMode(),primaryColor:this._primaryColor(),secondaryColor:this._secondaryColor(),accentColor:this._accentColor(),borderRadius:this._borderRadius(),fontFamily:this._fontFamily()}));cssVariables=a(()=>{let e=this.themeConfig();return{"--primary-color":e.primaryColor,"--secondary-color":e.secondaryColor,"--accent-color":e.accentColor,"--border-radius":`${e.borderRadius}px`,"--font-family":e.fontFamily,"--theme-mode":e.mode}});currentTheme=a(()=>{let e=this._themeMode();return e==="auto"?this.getSystemTheme():e});constructor(){console.log("ThemeService: Constructor called"),this.loadThemeFromStorage(),this.setupThemeEffects(),console.log("ThemeService: Initialization complete, current theme:",this.currentTheme())}setThemeMode(e){console.log("ThemeService: Setting theme mode to",e),this._themeMode.set(e),this.applyTheme()}toggleTheme(){let e=this._themeMode(),o=e==="light"?"dark":"light";console.log("ThemeService: Toggling theme from",e,"to",o),this.setThemeMode(o)}setPrimaryColor(e){this._primaryColor.set(e),this.applyTheme()}setSecondaryColor(e){this._secondaryColor.set(e),this.applyTheme()}setAccentColor(e){this._accentColor.set(e),this.applyTheme()}setBorderRadius(e){this._borderRadius.set(e),this.applyTheme()}setFontFamily(e){this._fontFamily.set(e),this.applyTheme()}applyPresetTheme(e){let r={default:{primaryColor:"#1976d2",secondaryColor:"#dc004e",accentColor:"#ff9800",borderRadius:8,fontFamily:"Roboto, sans-serif"},material:{primaryColor:"#6200ea",secondaryColor:"#03dac6",accentColor:"#ff6b35",borderRadius:4,fontFamily:"Roboto, sans-serif"},modern:{primaryColor:"#2563eb",secondaryColor:"#7c3aed",accentColor:"#f59e0b",borderRadius:12,fontFamily:"Inter, sans-serif"},minimal:{primaryColor:"#374151",secondaryColor:"#6b7280",accentColor:"#10b981",borderRadius:6,fontFamily:"system-ui, sans-serif"}}[e];r&&(Object.entries(r).forEach(([i,t])=>{switch(i){case"primaryColor":this._primaryColor.set(t);break;case"secondaryColor":this._secondaryColor.set(t);break;case"accentColor":this._accentColor.set(t);break;case"borderRadius":this._borderRadius.set(t);break;case"fontFamily":this._fontFamily.set(t);break}}),this.applyTheme())}setupThemeEffects(){d(()=>{let e=this.themeConfig();this.storage.setItem(this.THEME_STORAGE_KEY,e)}),d(()=>{this.applyThemeToDOM()})}loadThemeFromStorage(){let e=this.storage.getItem(this.THEME_STORAGE_KEY);e?(console.log("ThemeService: Loading saved theme config:",e),this._themeMode.set(e.mode),this._primaryColor.set(e.primaryColor),this._secondaryColor.set(e.secondaryColor),this._accentColor.set(e.accentColor),this._borderRadius.set(e.borderRadius),this._fontFamily.set(e.fontFamily)):(console.log("ThemeService: No saved config, applying default theme"),this.applyPresetTheme("default")),this.applyTheme()}applyTheme(){let e=this.themeConfig();console.log("ThemeService: Saving theme config to storage:",e),this.storage.setItem(this.THEME_STORAGE_KEY,e)}applyThemeToDOM(){let e=this.cssVariables(),o=document.documentElement,r=this.currentTheme();console.log("ThemeService: Applying theme to DOM",{mode:this._themeMode(),currentTheme:r,variables:e}),Object.entries(e).forEach(([i,t])=>{o.style.setProperty(i,t)}),o.classList.remove("light-theme","dark-theme"),o.classList.add(`${r}-theme`),console.log("ThemeService: Applied classes to root element:",o.classList.toString()),this.updateColorSchemeMeta()}updateColorSchemeMeta(){let e="light";this.currentTheme()==="dark"?e="dark":this._themeMode()==="auto"&&(e="light dark");let o=document.querySelector('meta[name="color-scheme"]');o||(o=document.createElement("meta"),o.setAttribute("name","color-scheme"),document.head.appendChild(o)),o.setAttribute("content",e)}getSystemTheme(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}isDarkMode(){let e=this.currentTheme()==="dark";return console.log("ThemeService: isDarkMode() called, returning:",e),e}isLightMode(){return this.currentTheme()==="light"}forceRefreshTheme(){console.log("ThemeService: Force refreshing theme"),this.applyThemeToDOM(),setTimeout(()=>{document.body.style.display="none",document.body.offsetHeight,document.body.style.display=""},10)}getContrastColor(e){let o=e.replace("#",""),r=parseInt(o.substr(0,2),16),i=parseInt(o.substr(2,2),16),t=parseInt(o.substr(4,2),16);return(r*299+i*587+t*114)/1e3>128?"#000000":"#ffffff"}exportTheme(){return this.themeConfig()}importTheme(e){this._themeMode.set(e.mode),this._primaryColor.set(e.primaryColor),this._secondaryColor.set(e.secondaryColor),this._accentColor.set(e.accentColor),this._borderRadius.set(e.borderRadius),this._fontFamily.set(e.fontFamily)}static \u0275fac=function(o){return new(o||n)};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})};export{c as a};
